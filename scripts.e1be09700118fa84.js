!function(r,i){"object"==typeof exports&&typeof module<"u"?module.exports=i(require("./base-component.js"),require("./dom/event-handler.js"),require("./dom/selector-engine.js"),require("./util/index.js")):"function"==typeof define&&define.amd?define(["./base-component","./dom/event-handler","./dom/selector-engine","./util/index"],i):(r=typeof globalThis<"u"?globalThis:r||self).Tab=i(r.BaseComponent,r.EventHandler,r.SelectorEngine,r.Index)}(this,function(r,i,n,_){"use strict";const o=".bs.tab",D=`hide${o}`,L=`hidden${o}`,C=`show${o}`,m=`shown${o}`,R=`click${o}`,w=`keydown${o}`,v=`load${o}`,S="ArrowLeft",g="ArrowRight",$="ArrowUp",f="ArrowDown",l="Home",b="End",a="active",O="fade",E="show",T=".dropdown-toggle",d=`:not(${T})`,N='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',A=`.nav-link${d}, .list-group-item${d}, [role="tab"]${d}, ${N}`,K=`.${a}[data-bs-toggle="tab"], .${a}[data-bs-toggle="pill"], .${a}[data-bs-toggle="list"]`;class c extends r{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),i.on(this._element,w,e=>this._keydown(e)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?i.trigger(e,D,{relatedTarget:t}):null;i.trigger(t,C,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(a),this._activate(n.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),i.trigger(t,m,{relatedTarget:e})):t.classList.add(E)},t,t.classList.contains(O)))}_deactivate(t,e){t&&(t.classList.remove(a),t.blur(),this._deactivate(n.getElementFromSelector(t)),this._queueCallback(()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),i.trigger(t,L,{relatedTarget:e})):t.classList.remove(E)},t,t.classList.contains(O)))}_keydown(t){if(![S,g,$,f,l,b].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(u=>!_.isDisabled(u));let s;if([l,b].includes(t.key))s=e[t.key===l?0:e.length-1];else{const u=[g,f].includes(t.key);s=_.getNextActiveElement(e,t.target,u,!0)}s&&(s.focus({preventScroll:!0}),c.getOrCreateInstance(s).show())}_getChildren(){return n.find(A,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=n.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains("dropdown"))return;const u=(V,Y)=>{const p=n.findOne(V,s);p&&p.classList.toggle(Y,e)};u(T,a),u(".dropdown-menu",E),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(a)}_getInnerElement(t){return t.matches(A)?t:n.findOne(A,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const e=c.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}})}}return i.on(document,R,N,function(h){["A","AREA"].includes(this.tagName)&&h.preventDefault(),!_.isDisabled(this)&&c.getOrCreateInstance(this).show()}),i.on(window,v,()=>{for(const h of n.find(K))c.getOrCreateInstance(h)}),_.defineJQueryPlugin(c),c});